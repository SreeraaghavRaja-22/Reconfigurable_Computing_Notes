## Register-Transfer (RT) Synthesis 
### Introduction
- Register-Transfer (RT) Synthesis 
	- Definition: Synthesis from register transfer level (RTL)
		- VHDL, Verilog typically describe circuits as connections of RTL components 
- What are register-transfer level components?
	- Muxes, ALUs, registers, multipliers, etc. 
	- One abstraction level above gates 
		- Basically, components you use in most structural descriptions 
	- What are other levels?
		- Transistor Level 
		- Gate Level 
		- Register Transfer Level 
		- High Level 
		- System Level (Described in different ways)
		- Etc. 
- Main Steps 
	- Lex/Parsing 
		- Analyzes HDL, converts into intermediate representation 
	- Resource Allocation 
		- maps intermediate representation into RT components 
	- Optimizations 
		- Logic minimization 
		- State minimization 
		- State encoding 
		- Etc. 
	- Technology mapping 
	- Placement + Routing
---
### Technology Mapping 
- Converts from one technology (e.g. gates) onto technology used by physical device (e.g. LUTs, CLBs, etc)
---
### Placement 
- Input: Technology-mapping circuit 
	- For simplicity, just consider CLBs
	- Technology-mapped circuits consists of "virtual" CLBs and "virtual" connections 
	- FPGA fabric consists of physical CLBs
- Simplified Placement Definition: 
	- Map "virtual" CLBs onto physical CLBs
		- I.e. Decide on a location in the FPGA for each virtual CLB
- **Image of Placement of Virtual CLBs on Physical CLBS** ![[Pasted image 20251004211832.png]]
- Netlist: A text representation of a schematic
---
### Routing
- Input: A set of placed components, and a list of "virtual" connections 
- Simplified Routing Definition: 
	- Determine how to configure routing resources to implement "virtual" connections 

---
### Placement and Routing (PAR)
- Placement and routing are highly dependent
	- Placement affects how well circuit can be routed 
	- Example: 
		- ![[Pasted image 20251004212533.png]]
- Goals: 
	- 1) **Make sure circuit can be implemented on fabric** 
		- trivial for placement, difficult for routing 
		- Bad placement may make circuit unrouteable 
	- 2) Minimize delay of critical path 
		- **Critical path is the longest register to register delay** 
		- **Important - Determines clock speed of circuit**
	- Why is placement and routing important? 
		- **Bad PAR = slow circuit**
		- BAD PAR = NO CIRCUIT
	- Problem: Find a placement for each CLB, such that routing can maximize clock speed
	- Challenges: 
		- 1) Huge solution space!
			- Tiny Example: Fabric = 100 physical CLBs, Circuit  = 10 "virtual" CLBs
				- Possibilities = 100!/90! = $6.2 \times 10^{19}$
				- And, that is for a tiny fabric and tiny circuit!!!
				- **placement is NP-Complete**
		- 2) How to know how good the routing will be? 
			- One (im)possibility - perform routing for each possible placement 
				- Tiny example, cont. - assume same number of routing possibilities as placement possibilities
				- $(6.2\times10^{19})^2$ = BIG NUMBER 
				- Routing is also NP-complete 
			- Clearly, placement needs to estimate quality of routing
				- Estimate known as *cost function* for placement 
- Cost Function Examples:
	- Average Wire Length 
		- Motivation: short wires faster than long wires 
			- Not perfect - many short wires not on critical path may lead to inaccuracy j
				- i.e. critical path may still be long despite short average wire length 
		- How to determine wire length? 
			- Without routing, don't know length 
			- Possibilities: 
				- 1) Euclidean Distance - measure straight line distance between CLBs 
					- Ignores how wire would be routed (can't route diagonals)
				- 2) Manhattan Distance - shortest "zig-zag" distance 
					- Include bends between CLBs
- Placement Techniques 
	- Placement is an NP-complete optimization problem
		- Many possible placements, want the best one 
	- What does this suggest for a solution? 